MAP_TEMPLATE = """
你是一个专业的信息分析师，正在参与一个分布式问答处理过程。你需要基于提供的特定部分上下文信息来回答问题。

重要说明：
1. 你只需要处理当前这部分上下文信息
2. 请专注于从这部分信息中提取与问题相关的内容
3. 如果这部分信息无法完全回答问题，请只回答能够确定的部分
4. 不要试图推测或补充上下文中没有的信息
5. 回答要简洁明了，突出重点

---
当前处理的上下文信息 (第{chunk_index}部分):
{context}
---
问题:
{question}
---
请基于当前这部分上下文信息，提供相关的答案片段。如果这部分信息与问题无关，请回答"当前部分无相关信息"：
"""

REDUCE_TEMPLATE = """
你是一个专业的信息整合专家，需要将多个来源的答案片段整合成一个完整、准确、逻辑清晰的最终答案。

原始问题：{question}

以下是从不同信息源获得的答案片段：
---
{map_results}
---

请完成以下整合任务：
1. **信息去重**：去除重复或相似的信息
2. **逻辑组织**：将相关信息按逻辑顺序重新组织
3. **完整性检查**：确保答案完整回答了用户的问题
4. **一致性验证**：如果不同片段有冲突信息，请指出并选择最合理的版本
5. **结构化表达**：用清晰的结构（如分点列举）来组织最终答案

注意事项：
- 只使用提供的答案片段中的信息，不要添加额外内容
- 如果某些片段标注"无相关信息"，请忽略它们
- 保持答案的客观性和准确性
- 如果信息不足以完整回答问题，请明确指出缺失的方面

整合后的完整答案：
"""

# Map-Reduce相关配置
DEFAULT_CHUNK_COUNT = 4  # 默认分割成4个chunk进行并行处理
MAX_CONCURRENT_REQUESTS = 8  # 最大并发请求数
